[
{
    "endpointSelector":
        {"matchLabels":{"id.httpd1":""}},
    "ingress": [{
        "fromEndpoints": [
            {"matchLabels":{"reserved:host":""}},
            {"matchLabels":{"id.app1":""}}
        ],
        "toPorts": [{
            "ports": [
                {"port": "80", "protocol": "tcp"}],
            "rules": {
                "HTTP": [
                    {"method": "GET", "path": "/public.*"}]
            }
        }]
    }]
},
{
    "endpointSelector":
        {"matchLabels":{"id.httpd2":""}},
    "ingress": [{
        "fromEndpoints": [
            {"matchLabels":{"reserved:host":""}},
            {"matchLabels":{"id.app2":""}}
        ],
        "toPorts": [{
            "ports": [
                {"port": "80", "protocol": "tcp"}],
            "rules": {
                "HTTP": [{"method": "GET",
			  "path": "/public.*",
			  "headers": ["User-Agent: CuRL/x.y.z"]
			 }]
            }
        }]

    }]
},
{
    "endpointSelector":
        {"matchLabels":{"id.app2":""}},
    "egress": [{
        "toPorts": [{
            "ports": [
                  {"port": "80",   "protocol": "tcp"}],
            "rules": {
                "HTTP": [{
		    "method": "GET",
		    "path": "/public.*",
		    "headerMatches": {
			"mismatch": "REPLACE",
			"name": "User-Agent",
			"value": "CuRL/x.y.z"
		    }
		}]
	    }
        }]
    }]
},
{
    "endpointSelector":
    {"matchLabels":{"id.app3":""}},
    "egress": [{
        "toEndpoints": [
            {"matchLabels":{"id.httpd3":""}}
        ],
        "toPorts": [{
            "ports": [
                {"port": "80",   "protocol": "tcp"}],
            "rules": {
                "HTTP": [
                    {"method": "GET", "path": "/public.*"}]
            }
        }]
    }]
}]
